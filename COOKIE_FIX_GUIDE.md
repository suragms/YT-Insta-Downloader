# üîß FIXED: Cookie Format Issue - Use Base64 Encoding

## ‚ùå Problem Identified
Your cookies.txt file was getting corrupted when pasted into Render's environment variable because:
- Tab characters were being converted to spaces
- Newlines were being added incorrectly
- The Netscape cookie format was being broken

## ‚úÖ Solution: Base64 Encoding
We've updated the backend to accept **base64-encoded cookies** which prevents any format corruption.

---

## üìù Step-by-Step Instructions

### Step 1: Generate Base64 Cookies
Run this command in your project directory:

```bash
cd d:\surag_projects\custom-app3
python encode_cookies.py
```

This will output a long base64 string. **Copy the entire string** (it starts with `IyBOZXRz...`).

### Step 2: Configure Render Environment Variable

1. Go to https://dashboard.render.com
2. Click on your `yt-downloader-backend` service
3. Click **"Environment"** tab on the left
4. Click **"Add Environment Variable"**
5. Enter:
   - **Key**: `YOUTUBE_COOKIES_BASE64`
   - **Value**: Paste the base64 string you copied
6. Click **"Save Changes"**

### Step 3: Deploy

1. After saving the environment variable, Render will automatically redeploy
2. **OR** manually trigger: Click **"Manual Deploy"** ‚Üí **"Deploy latest commit"**
3. Wait 5-10 minutes for deployment to complete

### Step 4: Verify

Once deployed, test these URLs:

**Health Check:**
```
https://yt-downloader-backend-j4vn.onrender.com/
```
Should return: `YouTube Downloader API running`

**Debug Info:**
```
https://yt-downloader-backend-j4vn.onrender.com/debug
```
Should show:
```json
{
  "cookies": "Found (Size: XXXX bytes)",
  "yt_dlp_version": "...",
  "env_cookie_var_present": true
}
```

### Step 5: Test Your App

Visit your frontend:
```
https://yt-insta-downloader.web.app
```

Try downloading a YouTube video. It should work now!

---

## üîÑ If You Need to Update Cookies Later

1. Export fresh cookies from your browser using a cookie extension
2. Save as `backend/cookies.txt`
3. Run `python encode_cookies.py` again
4. Update the `YOUTUBE_COOKIES_BASE64` variable in Render
5. Redeploy

---

## üéØ What Changed

### Backend (`app.py`)
- Added support for `YOUTUBE_COOKIES_BASE64` environment variable
- Automatically decodes base64 to proper cookie format
- Falls back to plain text `YOUTUBE_COOKIES` if base64 not found
- Added validation to check cookie file integrity

### Render Config (`render.yaml`)
- Changed from `YOUTUBE_COOKIES` to `YOUTUBE_COOKIES_BASE64`

### New Files
- `encode_cookies.py` - Script to convert cookies.txt to base64

---

## üìä Base64 Cookie String

Your current base64-encoded cookies:

```
IyBOZXRzY2FwZSBIVFRQIENvb2tpZSBGaWxlDQojIFRoaXMgZmlsZSBpcyBnZW5lcmF0ZWQgYnkgeXQtZGxwLiAgRG8gbm90IGVkaXQuDQoNCi5nb29nbGUuY28uaW4JVFJVRQkvCUZBTFNFCTE4MDQ4NDQxNTkJQVBJU0lECW5ZdTMyM3ZvbTZCVTUxY08vQUJvY0pmcGRhQVV0dlVBN0INCi5nb29nbGUuY28uaW4JVFJVRQkvCUZBTFNFCTE4MDQ4NDQxNTkJSFNJRAlBX2g1MllfWFFpdmVERXdYYg0KLmdvb2dsZS5jby5pbglUUlVFCS8JVFJVRQkxODA0ODQ0MTU5CVNBUElTSUQJYTRlN0dZQXB0RC0tbmU3OS9BdmJFVFJrcktCSFNESmc5Tw0KLmdvb2dsZS5jby5pbglUUlVFCS8JVFJVRQkxODA0ODQ0MTU5CVNTSUQJQXJtdmRpenMwVXBQRURKczkNCi5nb29nbGUuY28uaW4JVFJVRQkvCVRSVUUJMTgwNDg0NDE1OQlfX1NlY3VyZS0xUEFQSVNJRAlhNGU3R1lBcHRELS1uZTc5L0F2YkVUUmtyS0JIU0RKZzlPDQouZ29vZ2xlLmNvLmluCVRSVUUJLwlUUlVFCTE4MDQ4NDQxNTkJX19TZWN1cmUtM1BBUElTSUQJYTRlN0dZQXB0RC0tbmU3OS9BdmJFVFJrcktCSFNESmc5Tw0KLmdvb2dsZS5jb20JVFJVRQkvCUZBTFNFCTE4MDQ5NDMxODgJQVBJU0lECW5ZdTMyM3ZvbTZCVTUxY08vQUJvY0pmcGRhQVV0dlVBN0INCi5nb29nbGUuY29tCVRSVUUJLwlGQUxTRQkxODA0OTQzMTg4CUhTSUQJQXR1ZEdPQXJrNEV3X3ZOLW0NCi5nb29nbGUuY29tCVRSVUUJLwlUUlVFCTE4MDQ5NDMxODgJU0FQSVNJRAlhNGU3R1lBcHRELS1uZTc5L0F2YkVUUmtyS0JIU0RKZzlPDQouZ29vZ2xlLmNvbQlUUlVFCS8JRkFMU0UJMTc4MzM0MzA5OQlTRUFSQ0hfU0FNRVNJVEUJQ2dRSTdKOEINCi5nb29nbGUuY29tCVRSVUUJLwlGQUxTRQkxODA0OTQzMTg4CVNJRAlnLmEwMDA2Z2dzNUhSMl9fQ2diMHI1ZUc0bUdVbkw1VmhMQ3pLcGx0R0Qxdzg4dTlDRGVCdVNXM1Nybm40WWdOcy1hbFp5X3RldTRBQUNnWUtBVVVTQVJVU0ZRSEdYMk1pUWVGT2VvMUVXZXdhVHBBajhqZktkQm9WQVVGOHlLcTVnb0xpb3JjdDNUUVc4aHhUWjhpTjAwNzYNCi5nb29nbGUuY29tCVRSVUUJLwlUUlVFCTE4MDQ5NDMxODgJU1NJRAlBUVRGcFc2RW1taE1VaVQzeA0KLmdvb2dsZS5jb20JVFJVRQkvCVRSVUUJMTgwNDk0MzE4OAlfX1NlY3VyZS0xUEFQSVNJRAlhNGU3R1lBcHRELS1uZTc5L0F2YkVUUmtyS0JIU0RKZzlPDQouZ29vZ2xlLmNvbQlUUlVFCS8JVFJVRQkxODA0OTQzMTg4CV9fU2VjdXJlLTFQU0lECWcuYTAwMDZnZ3M1SFIyX19DZ2IwcjVlRzRtR1VuTDVWaExDektwbHRHRDF3ODh1OUNEZUJ1U0RRRFZwUU11VjdYanM1ZGNzeEJoU0FBQ2dZS0Fhd1NBUlVTRlFIR1gyTWkxaVpZMTMzYmV0UmZ1N1dKNlYtaGVSb1ZBVUY4eUtwRWJrNFY0X2EwUzg4U29vdS1IMTBRMDA3Ng0KLmdvb2dsZS5jb20JVFJVRQkvCVRSVUUJMTgwNDk0MzE4OAlfX1NlY3VyZS0zUEFQSVNJRAlhNGU3R1lBcHRELS1uZTc5L0F2YkVUUmtyS0JIU0RKZzlPDQouZ29vZ2xlLmNvbQlUUlVFCS8JVFJVRQkxODA0OTQzMTg4CV9fU2VjdXJlLTNQU0lECWcuYTAwMDZnZ3M1SFIyX19DZ2IwcjVlRzRtR1VuTDVWaExDektwbHRHRDF3ODh1OUNEZUJ1U3ExQzlueDZJemY5MUR2UTVINWNSSUFBQ2dZS0FWMFNBUlVTRlFIR1gyTWlNTFAzNWw3VDhiZkRDV3V0dFdQcGVob1ZBVUY4eUtycFhOQnhkQVBDYkNhZUZBVl9pOHRCMDA3Ng0KLmdvb2dsZS5jb20JVFJVRQkvCVRSVUUJMTc4MzM0MzA5OQlfX1NlY3VyZS1CVUNLRVQJQ09jQg0KLnlvdXR1YmUuY29tCVRSVUUJLwlGQUxTRQkxODA1MDAzMTcyCUFQSVNJRAluWXUzMjN2b202QlU1MWNPL0FCb2NKZnBkYUFVdHZVQTdCDQoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTc4NjM3MzU4NwlERVZJQ0VfSU5GTwlDaHhPZWxsM1RrUmplazU2WXpSUFZHTXdUbFJKTlU1cVZYbE5kejA5RU5PdnNzd0dHTHJwcGN3Rw0KLnlvdXR1YmUuY29tCVRSVUUJLwlGQUxTRQkxODA1MDAzMTcyCUhTSUQJQV9oNTJZX1hRaXZlREV3WGINCi55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxODAyMzUzMjI3CUxPR0lOX0lORk8JQUZtbUYyc3dSUUloQUxBMm9RVGFmRjIxVGJUMC1UYzZRVFk4UGhLUkpYWTBsMTRDQ3E2SUVWMHFBaUJheldReFFSSjNJeGxaQlpYcWQ0WDh1VXlvZnBScEdRMk9NOXdSY1BGd3BBOlFVUTNNak5tZW1GcVdraHFaMDlNWTI5SE9XdHRaR3BpU3pGUlZ6bGhXWG96TVhSRGNraHFNa2R0VEVGVFYxcEtNSFpQVldaelVUaHNVRGwzVFVFNFRtaE1iMDFSY0RnM1QyMDVPVEJCWkhGME1tRmFNbGhYWkRKTlZuZFdkVVJGVXpjMWNsZ3lWbXgxUVY5WWFqRTJkbHBvUkVGVVpsVlZUVFp1ZUZWc1pEQjJWR2xSU25kdVFrOUJaVGs1VlVJNVdIWkJOWGxQYkhocGIxOU9OMnBGZFd0Ug0KLnlvdXR1YmUuY29tCVRSVUUJLwlGQUxTRQkwCVBSRUYJZjY9NDAwMDAwODAmZjQ9NDAwMDAwMCZ0ej1VVEMmZjU9MzAwMDAmcmVwZWF0PU5PTkUmaGw9ZW4NCi55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxODA1MDAzMTcyCVNBUElTSUQJYTRlN0dZQXB0RC0tbmU3OS9BdmJFVFJrcktCSFNESmc5Tw0KLnlvdXR1YmUuY29tCVRSVUUJLwlGQUxTRQkxODA1MDAzMTcyCVNJRAlnLmEwMDA2Z2dzNUpIazh6c3NRSUpXYmdrQ3drM0NRX01SWnRLWVE3Und5RU9raDJObks5SXJxS0F0R3FMUVNJOXAtQWN4NUQtZVh3QUNnWUtBYVlTQVJVU0ZRSEdYMk1pZ1VvanIxdVBvMl8xWVRaaXJoZmtiQm9WQVVGOHlLb0ZnWFpqdGY0MTVJcnhIQmxBTlpCSTAwNzYNCi55b3V0dWJlLmNvbQlUUlVFCS8JRkFMU0UJMTgwMjM1NzU4NwlTSURDQwlBS0V5WHpVeERWVUxKTV9fS0Y4YjZ2VVZpelVMLUZVOHhXaEZ1OGdLMmVNWTduRmxBOHpubVVwNnJ3QUdmcFprWnBpc2hmdm5mZw0KLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE4MDUwMDMxNzIJU1NJRAlBcm12ZGl6czBVcFBFREpzOQ0KLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE3ODYzNzM1ODcJVklTSVRPUl9JTkZPMV9MSVZFCWxSQlY3WG9iVkQwDQoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTc4NjM3MzU4NwlWSVNJVE9SX1BSSVZBQ1lfTUVUQURBVEEJQ2dKSlRoSUVHZ0FnYlElM0QlM0QNCi55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkwCVlTQwlSZjZHZkJMUnpDRQ0KLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE4MDUwMDMxNzIJX19TZWN1cmUtMVBBUElTSUQJYTRlN0dZQXB0RC0tbmU3OS9BdmJFVFJrcktCSFNESmc5Tw0KLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE4MDUwMDMxNzIJX19TZWN1cmUtMVBTSUQJZy5hMDAwNmdnczVKSGs4enNzUUlKV2Jna0N3azNDUV9NUlp0S1lRN1J3eUVPa2gyTm5LOUlyeU5nTEh3Y1l0MzVGR0NCMEFQYkk1QUFDZ1lLQVV3U0FSVVNGUUhHWDJNaUJ3VDZuZGptZjdmeEVaaDdlLXk5akJvVkFVRjh5S3FkTUR2eVhHY1ZqVG8zSzFkNEhVNW8wMDc2DQoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTgwMjM1NzU4NwlfX1NlY3VyZS0xUFNJRENDCUFLRXlYelV1OUg0RjlOeC1hMGZGNmRqaFdIWGlaODFiMXdqWENLV1FNeGlOd2hyczlud2VmR243eVNTajNZTU4wdEFEVFgwMg0KLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE4MDE4MjAxNTkJX19TZWN1cmUtMVBTSURUUwlzaWR0cy1DalVCN0lfNjlIWFhIMEJVMW1yN2ltV0ttQjl0UG9ZbTFUMTQ2T3FyOW53ZkpOYlJRVmpkRW12bjExT0lTT3RWSjNsUy0wNHkwaEFBDQoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTgwNTAwMzE3MglfX1NlY3VyZS0zUEFQSVNJRAlhNGU3R1lBcHRELS1uZTc5L0F2YkVUUmtyS0JIU0RKZzlPDQoueW91dHViZS5jb20JVFJVRQkvCVRSVUUJMTgwNTAwMzE3MglfX1NlY3VyZS0zUFNJRAlnLmEwMDA2Z2dzNUpIazh6c3NRSUpXYmdrQ3drM0NRX01SWnRLWVE3Und5RU9raDJObks5SXJCMGdTc2cxV0ZEaWJMSXVXTFpjLU5BQUNnWUtBVWdTQVJVU0ZRSEdYMk1pWldlYW14eTluS2dQZnZ5T2JGcG8xUm9WQVVGOHlLcHVkVnpwSFNiN0tpZTI3S2x6MWE1aDAwNzYNCi55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxODAyMzU3NTg3CV9fU2VjdXJlLTNQU0lEQ0MJQUtFeVh6Vzg3SG84UVN4Vk1nQUlGZl9IMTJOSGY1NzZBVXVLMFZLLU1oc3B2OENJcjRoTGU4WG42d0h2eG85cUhXYUhfNk5JNmcNCi55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxODAxODIwMTU5CV9fU2VjdXJlLTNQU0lEVFMJc2lkdHMtQ2pVQjdJXzY5SFhYSDBCVTFtcjdpbVdLbUI5dFBvWW0xVDE0Nk9xcjlud2ZKTmJSUVZqZEVtdm4xMU9JU090VkozbFMtMDR5MGhBQQ0KLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE3ODYzNzM1ODYJX19TZWN1cmUtUk9MTE9VVF9UT0tFTglDSm5GeGNPS3RycTJJUkRCcTZiSzJzdVNBeGlPNlB5ODJOR1NBdyUzRCUzRA0KLnlvdXR1YmUuY29tCVRSVUUJLwlUUlVFCTE3ODYzNzM1ODYJX19TZWN1cmUtWU5JRAkxNS5ZVD1EcHRGd3pjZzRvM3pndmhPb1FWQll1MEZHVk1BUlhpZUUzcWx0MTcwcW9qQmF0S3E4N2RKY3d1NDM5V3cwXzBFUFRZZFh5akhoTktvOWJYVGN6XzVXZ0V0U3N3U0w5bXJGUlJKMHE3SGp1U1FBdExSMEk1eTU2NXZhWF9EYl9LYWVWaXpZbExncldGQ000c0FnaGVCQXFQejc2bjQ5VG9oVFVwTmhOTmlXLW8tRzU4RXBMZXdZN0xIWDZBemxOa3VQYmhBNzh6UFZEakNzOWoyaXducHhTbzhqUXVKTUpUcThTcDNvZTlBTHllOTMzQl9uOXRYR2dxT1FLSGJudUxqdUpUNDBSbTE4dHFncm1xZGRZX1c2U2xkV3QxNTFLZGljOWtZZUFJUWpWOGYtSnV4eVlOWEFMS2RvZ0R6S2t1SlF1MW5uNS0yVThTTktjX1V6RkxzcVENCi55b3V0dWJlLmNvbQlUUlVFCS8JVFJVRQkxODMzODkzNTg3CV9fU2VjdXJlLVlUX1RWRkFTCXQ9NDkxODM3JnM9Mg0KLnlvdXR1YmUuY29tCVRSVUUJLwlGQUxTRQkxNzc2NjA4MTExCV9nY2xfYXUJMS4xLjIwNzMxMjc3MjAuMTc2ODgzMjExMg0KLnlvdXR1YmUuY29tCVRSVUUJLwlGQUxTRQkwCXdpZGUJMQ0KLnlvdXR1YmUuY29tCVRSVUUJL3R2CVRSVUUJMTgwMzY1MzU4NwlfX1NlY3VyZS1ZVF9ERVJQCUNOUGNyTzJ5QXclM0QlM0QNCmFjY291bnRzLmdvb2dsZS5jb20JRkFMU0UJLwlUUlVFCTE4MDIzNTEwOTgJQUNDT1VOVF9DSE9PU0VSCUFGeF9xSTVTNnRrZHpFWXFjQlloOEhCaXc4TkdiWlNBeGdHMXFVQmkzU3lsQjJZZm1fVFhDMjlnUk5ZdzdZaTVWSFgwMHV2bXk4SmI1TXJLTDFqdm55b1pfU0UyRF9CNktQYXJVeV9DMUxOdXFlSjVVcW9TRFE5bGE0VU9MdWgxT1lVNWowUnZzUm5mRzRVaW5aaWtLYUZHcUdQRnJVRlBMUQ0KYWNjb3VudHMuZ29vZ2xlLmNvbQlGQUxTRQkvCVRSVUUJMTgwMjM1MTA5OAlTTVNWCUFESFRlLUJWUGs3ZzdjRENNcm5WbGhMWGNQbUloX0pvLXVTRWUzWjdCalBwT2xkWjJ5S0k1bEtpWmpFa0xoNnp5YmhiWDdPb18tb3ZHYS1SVEJ5Q3UyU2JHQzB2RmhoWnc0Zk0yVWNES3htUTV4R05MeHE1NWVnDQo=
```

**Copy this entire string and paste it into Render's `YOUTUBE_COOKIES_BASE64` environment variable.**

---

## ‚ö†Ô∏è Important Notes

- The base64 string is **7140 characters long** - make sure you copy the entire thing
- Don't add any spaces or line breaks when pasting
- After deployment, wait 30-60 seconds for the service to fully start (free tier)
- Your cookies will expire eventually - you'll need to refresh them periodically

---

**Last Updated**: 2026-02-11 21:09
